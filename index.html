<!DOCTYPE html>

<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css" media="screen and (orientation:portrait)"/>
    <meta name="viewport" content="width=device-width, user-scalable=no"/>
    <title> COLOR ASSN </title>
</head>

<body>
    <!-- HTML5 article tag for content -->
    <div id="content">
   
    <header>COLOR ASSN</header>

   <h1>Welcome to Color Assn</h1>

   <footer>Data Visualization</footer>
    </div>

    <fieldset>
        <legend>What is your religious identity? (select all that apply)</legend>
        <input type="checkbox" value="Unaffiliated" class="religion">Unaffiliated</input>
        <input type="checkbox" value="Atheism" class="religion">Atheism</input>
        <input type="checkbox" value="Agnosticism" class="religion">Agnosticism</input>
        <input type="checkbox" value="Christianity" class="religion">Christianity</input>
        <input type="checkbox" value="Islam" class="religion">Islam</input>
        <input type="checkbox" value="Judaism" class="religion">Judaism</input>
        <input type="checkbox" value="Hinduism" class="religion">Hinduism</input>
        <input type="checkbox" value="Buddhism" class="religion">Buddhism</input>
        <input type="checkbox" value="Sikhism" class="religion">Sikhism</input>
        <input type="checkbox" value="Confucianism" class="religion">Confucianism</input>
        <input type="checkbox" value="Taoism" class="religion">Taoism</input>
        <input type="checkbox" value="Chinese" class="religion">Chinese Folk Religion</input>
        <input type="checkbox" class="religion">Other (not listed): <input id="other" /></input>
    </fieldset>

    <button type="button" id="submit">Submit</button>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyD9iR4okBA8TRKZZtOGd_F57CF54kQpExQ",
          authDomain: "colorassn.firebaseapp.com",
          databaseURL: "https://colorassn-default-rtdb.firebaseio.com/",
          projectId: "colorassn",
          storageBucket: "colorassn.appspot.com",
          messagingSenderId: "820973011771",
          appId: "1:820973011771:web:80d213bbd5a510cc2d2d1e"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        // Initialize Realtime Database and get a reference to the service
        const database = getDatabase(app);

        function write2DB(userId, text) {
            var religion = document.getElementsByClassName("religion");
            var userReligion = [];
            for (var i = 0; i < religion.length; i++) {
                if (religion[i].checked) {
                    if (i == religion.length - 1) {
                        userReligion.push(document.getElementById("other").value);
                    } else {
                        userReligion.push(religion[i].value);
                    }
                }
            }

            const db = getDatabase();
            set(ref(db, 'users/' + userId), {
                religions: userReligion
            });
        }

        document.querySelector("#submit").addEventListener('click', () => write2DB(1,'sampletext'));
    </script>
</body>
</html>