<!-- You get the idea -->
<!DOCTYPE html>
<html>

  <head>
    <title>COLOR ASSN</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://x3dom.org/release/x3dom-full.js"></script>
    <link rel="stylesheet" href="https://x3dom.org/release/x3dom.css"/>
    <script src="https://cdn.jsdelivr.net/npm/d3-x3d@2.1.5/dist/d3-x3d.min.js"></script>
  </head>

  <div id="content">
    <header>COLOR ASSOCIATION - RESULTS</header>
    <h1>Color Association - Results</h1>
  </div>

  <body>
    <div id="chartholder"></div>

    <script>
      function loadChart(data) {
        // Select chartholder
        var chartHolder = d3.select("#chartholder");

        // Declare the chart component
        var myChart = d3.x3d.chart.particlePlot()
          .mappings({ x: "ridge", y: "nub", z: "crack", size: "density", color: "weight" })
          .colors(d3.schemeRdYlGn[8]);

        // Generate chart
        chartHolder.datum(data).call(myChart);
      }

      // Generate Chart fro Pollen CSV Data
      // Source: http://metagrid2.sv.vt.edu/~npolys/InfoVis2019/pollen.csv
      d3.csv("./pollen.csv")
        .then((data) => {
          var points = data.map((d) => {
            return {
              key: 'Point' + d.OBSERVATION_NUMBER,
              values: [
                { key: "weight", value: +d.WEIGHT },
                { key: "density", value: +d.DENSITY },
                { key: "ridge", value: +d.RIDGE },
                { key: "nub", value: +d.NUB },
                { key: "crack", value: +d.CRACK },
              ]
            };
          });

          var pollenData = {
            key: 'Pollen',
            values: points
          };

          loadChart(pollenData);
        })
        .finally(() => {
          x3dom.reload();
        });
    </script>

    <br>
  </body>

</html>